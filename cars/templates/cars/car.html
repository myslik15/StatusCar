{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ adv.car.brand }} {{ adv.car.model }} - {{ adv.price }} BYN | STATUSCAR</title>
    <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'css/car.css' %}">
</head>
<body>
    <header class="header">
        <div class="header__top container">
            <div class="header-top__logo">
                <img src="{% static 'icons/icons8-меню-50.png' %}" alt="Меню">
                <h2>STATUSCAR</h2>
            </div>
            <div class="header-top__search">
                <img src="{% static 'icons/icons8-поиск-50.png' %}" alt="Поиск">
                <input type="text" placeholder="поиск по объявлениям">
            </div>
            <div class="header-top__buttons">
                <button class="header-top-buttons__button">
                    <img src="{% static 'icons/icons8-сердце-48.png' %}" alt="Избранное">
                    <p>Избранное</p>
                </button>
                <button class="header-top-buttons__button">
                    <img src="{% static 'icons/free-icon-compare-5575998.png' %}" alt="Сравнения">
                    <p>Сравнения</p>
                </button>
                <button class="header-top-buttons__button">
                    <img src="{% static 'icons/icons8-поиск-любви-48.png' %}" alt="Поиск">
                    <p>Поиск</p>
                </button>
                <button class="header-top-buttons__button">
                    <img src="{% static 'icons/free-icon-writing-6570260.png' %}" alt="Сообщения">
                    <p>Сообщения</p>
                </button>
                <button class="header-top-buttons__button">
                    <img src="{% static 'icons/free-icon-car-16076122.png' %}" alt="Я продаю">
                    <p>Я продаю</p>
                </button>
            </div>
            <div class="header-top__right-buttons">
                <button class="header-top-right-buttons__entrance">Войти</button>
                <button class="header-top-right-buttons__place-an-ad">Разместить объявление</button>
            </div>
        </div>
        <div class="header__middle">
            <div class="header-middle__links">
                <a href="#">Виртуальная примерочная</a>
                <a href="#">Статус-рекомендации</a>
                <a href="#">Статус-фильтры</a>
                <a href="#">Калькулятор содержания</a>
                <a href="#">Статус-тренды</a>
                <a href="#">Проверить историю</a>
                <a href="#">История поисков</a>
            </div>
        </div>
        <div class="header__bottom">
            <div class="header-bottom__left">
                <a href="{% url 'selection' %}">Объявления</a>
                <a href="#">Отзывы</a>
                <a href="#">Бортжурнал</a>
            </div>
            <div class="header-bottom__right">
                <button>
                    <img src="{% static 'icons/icons8-маркер-40.png' %}" alt="Регион">Регион
                </button>
            </div>
        </div>
        <div class="header__divider"></div>
    </header>

    <div class="advertisement container">
        <div class="advertisement__left">
            <div class="advertisement__title">
                <div class="advertisement-title__left">
                    <h1>{{ adv.car.brand }} {{ adv.car.model }} {{ adv.car.generation }}, {{ adv.car.year }}</h1>
                </div>
                <div class="advertisement-title__right">
                    <h5>{{ adv.price }} BYN</h5>
                </div>
            </div>
            
            <div class="advertisement__contacts">
                <div class="advertisement-contacts__check-seller">
                    <img src="{% static 'icons/shield_14867667.png' %}" alt="Проверенный продавец">
                </div>
                <div class="advertisement-contacts__name">
                    <div class="advertisement-contacts-name__top">
                        <p>{{ adv.first_name }} {{ adv.last_name }}</p>
                        <span class="verified-badge">✓</span>
                    </div>
                    <div class="advertisement-contacts-name__bottom">
                        <p>Минск, Беларусь</p>
                    </div>
                </div>
                <div class="advertisement-contacts__divider"></div>
                <div class="advertisement-contacts__message">
                    <img src="{% static 'icons/chat_5801758.png' %}" alt="Написать сообщение">
                </div>
                <div class="advertisement-contacts__divider"></div>
                <div class="advertisement-contacts__callback">
                    <img src="{% static 'icons/incoming-call_6760179.png' %}" alt="Обратный звонок">
                    <h6>Обратный звонок</h6>
                </div>
                <div class="advertisement-contacts__phone">
                    <h5 class="show-phone-btn">Показать номер</h5>
                    <div class="contacts-phone__circles">
                        <div class="contacts-phone__plus">+</div>
                            {% for i in "x"|ljust:"10" %}
                            <div class="contacts-phone__circle"></div>
                            {% endfor %}
                    </div>
                </div>
            </div>
            
            <div class="advertisement-about">
                <div class="advertisement-about__left">
                    <h5>Основное</h5>
                    <div class="advertisement-about-left__block">
                        <p>Год выпуска</p>
                        <p>{{ adv.car.year }}</p>
                    </div>
                    <div class="advertisement-about-left__block">
                        <p>Пробег</p>
                        <p>{{ adv.car.mileage|floatformat:0 }} км</p>
                    </div>
                    <div class="advertisement-about-left__block">
                        <p>Состояние</p>
                        <p>{% if adv.damage %}С повреждениями{% else %}Отличное{% endif %}</p>
                    </div>
                    
                    <h5>Характеристики</h5>
                    <div class="advertisement-about-left__characteristics-block">
                        <div class="characteristics-block__left">
                            <img src="{% static 'icons/engine_271914.png' %}" alt="Двигатель">
                        </div>
                        <div class="characteristics-block__right">
                            <p>Двигатель</p>
                            <h6>{{ adv.car.engine_volume }}, {{ adv.car.engine_type }}</h6>
                        </div>
                    </div>

                    <div class="advertisement-about-left__characteristics-block">
                        <div class="characteristics-block__left">
                            <img src="{% static 'icons/geabox_18066120.png' %}" alt="Коробка передач">
                        </div>
                        <div class="characteristics-block__right">
                            <p>Коробка</p>
                            <h6>{{ adv.car.transmission }}</h6>
                        </div>
                    </div>

                    <div class="advertisement-about-left__characteristics-block">
                        <div class="characteristics-block__left">
                            <img src="{% static 'icons/chassis_556947.png' %}" alt="Привод">
                        </div>
                        <div class="characteristics-block__right">
                            <p>Привод</p>
                            <h6>{{ adv.car.drive_type }}</h6>
                        </div>
                    </div>

                    <div class="advertisement-about-left__characteristics-block">
                        <div class="characteristics-block__left">
                            <img src="{% static 'icons/transport.png' %}" alt="Кузов">
                        </div>
                        <div class="characteristics-block__right">
                            <p>Кузов</p>
                            <h6>{{ adv.car.body_type }}</h6>
                        </div>
                    </div>

                    <div class="advertisement-about-left__characteristics-block">
                        <div class="characteristics-block__left">
                            <img src="{% static 'icons/brush_9873308.png' %}" alt="Цвет">
                        </div>
                        <div class="characteristics-block__right">
                            <p>Цвет</p>
                            <h6>{{ adv.car.color }}</h6>
                        </div>
                    </div>

                    {% if adv.damage and adv.damage_description %}
                    <div class="advertisement-about-left__damage">
                        <h5>Повреждения</h5>
                        <p>{{ adv.damage_description }}</p>
                    </div>
                    {% endif %}
                </div>
                
                <div class="advertisement-about__right">
                    <div class="advertisement-about-right__main-photo">
                        <img src="{{ adv.photo_1.url }}" alt="{{ adv.car.brand }} {{ adv.car.model }}" id="mainPhoto">
                        <button class="advertisement-about-right-main-photo__left-arrow" id="prevPhoto">‹</button>
                        <button class="advertisement-about-right-main-photo__right-arrow" id="nextPhoto">›</button>
                    </div>
                    <div class="advertisement-about-right__additionally-photo">
                        <div class="advertisement-about-right-additionally-photo__block active" data-photo="{{ adv.photo_1.url }}">
                            <img src="{{ adv.photo_1.url }}" alt="Фото 1">
                        </div>
                        {% if adv.photo_2 %}
                        <div class="advertisement-about-right-additionally-photo__block" data-photo="{{ adv.photo_2.url }}">
                            <img src="{{ adv.photo_2.url }}" alt="Фото 2">
                        </div>
                        {% endif %}
                        {% if adv.photo_3 %}
                        <div class="advertisement-about-right-additionally-photo__block" data-photo="{{ adv.photo_3.url }}">
                            <img src="{{ adv.photo_3.url }}" alt="Фото 3">
                        </div>
                        {% endif %}
                        {% if adv.photo_4 %}
                        <div class="advertisement-about-right-additionally-photo__block" data-photo="{{ adv.photo_4.url }}">
                            <img src="{{ adv.photo_4.url }}" alt="Фото 4">
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Описание от продавца -->
            <div class="advertisement-description">
                <h3>Описание</h3>
                <p>Продается {{ adv.car.brand }} {{ adv.car.model }} {{ adv.car.year }} года в отличном состоянии. 
                   Автомобиль полностью обслужен, все расходники заменены. 
                   {% if not adv.damage %}Без аварий, все оригинальные детали.{% endif %}
                   Срочная продажа в связи с переездом.</p>
            </div>
        </div>
        
        <div class="advertisement__right">
            <div class="advertisement-sidebar">    
                <div class="sidebar-block">
                    <h4>Здесь будет реклама</h4>
                    <div class="status-indicators">
                        </div>
                    </div>
                </div>
            </div>
        </div>            
    </div>
    
    <div class="divider"></div>

    <!-- Похожие объявления -->
    <section class="similar-ads container">
        <h2>Похожие автомобили</h2>
        <div class="list-of-cars">
            {% for similar_adv in similar_ads %}
            <div class="car">
                <div class="car-like">
                    <button><img src="{% static 'icons/icons8-сердце-50.png' %}" alt="В избранное"></button>
                </div>
                <div class="car-image">
                    <img src="{{ similar_adv.photo_1.url }}" alt="{{ similar_adv.car.brand }} {{ similar_adv.car.model }}">
                </div>
                <h2>{{ similar_adv.price }} BYN</h2>
                <h5>{{ similar_adv.car.brand }} {{ similar_adv.car.model }}</h5>
                <p>{{ similar_adv.car.year }} / {{ similar_adv.car.mileage|floatformat:0 }} км</p>
                <a href="{% url 'car' similar_adv.id %}" class="car-link">Посмотреть</a>
            </div>
            {% empty %}
            <div class="no-similar-ads">
                <p>Нет похожих объявлений</p>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Модальное окно показа номера телефона -->
    <div class="show-phone-number__overlay" id="phoneOverlay">
        <div class="show-phone-number">
            <div class="show-phone-number__top">
                <div class="show-phone-number-top__title">
                    <div class="show-phone-number-top-title__left">
                        <p>{{ adv.first_name }} {{ adv.last_name }}</p>
                        <p>Частное лицо</p>
                    </div>
                    <div class="show-phone-number-top-title__right">
                        <img src="{% static 'icons/default-avatar.png' %}" alt="Аватар">
                    </div>
                </div>
                <div class="show-phone-number-top__first-block">
                    <div class="show-phone-number-top__phone">
                        <div class="show-phone-number-top-phone__left">
                            <h1>+375 (29) XXX-XX-XX</h1>
                            <p>с 10:00 до 19:00</p>
                        </div>
                        <div class="show-phone-number-top-phone__right">
                            <img src="{% static 'icons/icons8-qr-код-64.png' %}" alt="QR код">
                            <p>Наведите на QR-код камеру телефона, чтобы позвонить</p>
                        </div>
                    </div>
                    <div class="show-phone-number-top__warning">
                        <div class="show-phone-number-top-warning__left">
                            <img src="{% static 'icons/exclamation-mark.svg' %}" alt="Внимание">
                        </div>
                        <div class="show-phone-number-top-warning__right">
                            <p>Внимание</p>
                            <p>Приобретая ТС, никогда не отправляйте предоплату</p>
                        </div>
                    </div>
                </div>
                <div class="show-phone-number-top__second-block">
                    <div class="map-placeholder">
                        <p>Карта местоположения</p>
                    </div>
                    <a href="#" class="show-phone-number-top-second-block__yandex">
                        <img src="{% static 'icons/yandex-svg-icon.png' %}" alt="Яндекс Такси">Доехать с Яндекс такси
                    </a>
                    <button class="show-phone-number-top-second-block__back">Показать телефон</button>
                </div>
                <div class="divider-show-phone"></div>
                <button class="show-phone-number-top__btn">Минск, ул. Примерная</button>
            </div>
            <div class="show-phone-number__bottom">
                <div class="show-phone-number-bottom__container">
                    <div class="show-phone-number-bottom__img">
                        <img src="{{ adv.photo_1.url }}" alt="{{ adv.car.brand }} {{ adv.car.model }}">
                    </div>
                    <div class="show-phone-number-bottom__brand">
                        <h5>{{ adv.car.brand }} {{ adv.car.model }}</h5>
                        <p>{{ adv.car.engine_volume }}, {{ adv.car.engine_type }}</p>
                        <p>{{ adv.car.body_type }}</p>
                        <p>{{ adv.car.color }}</p>
                    </div>
                    <div class="show-phone-number-bottom__price">
                        <h5>{{ adv.price }} BYN</h5>
                        <p>{{ adv.car.transmission }}</p>
                        <p>{{ adv.car.drive_type }}</p>
                    </div>
                    <div class="show-phone-number-bottom__buttons">
                        <button><img src="{% static 'icons/block.png' %}" alt="Заблокировать"></button>
                        <button><img src="{% static 'icons/health.png' %}" alt="В избранное"></button>
                    </div>
                </div>
                <div class="show-phone-number-bottom__input">
                    <input placeholder="Заметка об этом автомобиле (её увидите только Вы)">
                </div>  
            </div>
        </div>
        <button class="show-phone-number__overlay-btn" id="closePhoneOverlay">X</button>
    </div>
    
    <!-- Модальное окно фотографий -->
    <div class="car-photo__modal" id="photoModal">
        <button class="car-photo-modal__close-btn" id="closePhotoModal">X</button>
        <div class="car-photo-modal__left">
            <div class="car-photo-modal-left__top-button">
                <div class="car-photo-modal-left-top-button__button"></div>
            </div>
            <div class="car-photo-modal-left__photos-container">
                <div class="car-photo-modal-left__photos">
                    <div class="car-photo-modal-left__photo active">
                        <img src="{{ adv.photo_1.url }}" alt="Фото 1">
                    </div>
                    {% if adv.photo_2 %}
                    <div class="car-photo-modal-left__photo">
                        <img src="{{ adv.photo_2.url }}" alt="Фото 2">
                    </div>
                    {% endif %}
                    {% if adv.photo_3 %}
                    <div class="car-photo-modal-left__photo">
                        <img src="{{ adv.photo_3.url }}" alt="Фото 3">
                    </div>
                    {% endif %}
                    {% if adv.photo_4 %}
                    <div class="car-photo-modal-left__photo">
                        <img src="{{ adv.photo_4.url }}" alt="Фото 4">
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="car-photo-modal-left__bottom-button">
                <div class="car-photo-modal-left-bottom-button__button"></div>
            </div>
        </div>
        <div class="car-photo-modal__middle">
            <img src="{{ adv.photo_1.url }}" alt="{{ adv.car.brand }} {{ adv.car.model }}" id="modalMainPhoto">
        </div>
        <div class="car-photo-modal__right">
            <h2>{{ adv.price }} BYN</h2>
            <p>{{ adv.car.brand }} {{ adv.car.model }} {{ adv.car.generation }}, {{ adv.car.year }}</p>
            <p>{{ adv.car.mileage|floatformat:0 }} км</p>
            <div class="car-photo-modal-right__number">
                <h5>+375 (29) XXX-XX-XX</h5>
                <p>Круглосуточно</p>
            </div>
            <button class="write-message-btn">
                <img src="{% static 'icons/chat_5801758.png' %}" alt="Написать">Написать
            </button>
        </div>
    </div>

    <!-- Модальное окно обратного звонка -->
    <div class="callback__overlay" id="callbackOverlay">
        <button class="callback__close-btn" id="closeCallbackOverlay">X</button>
        <div class="callback__modal">
            <h2>Обратный звонок</h2>
            <p>{{ adv.first_name }} • Работает c 10:00 до 19:00</p>
            <input class="callback-modal__call-time" readonly placeholder="Выберите время звонка">
            <div class="callback-modal-call-time__modal">
                <p>Сегодня</p>
                <div class="callback-modal-call-time-modal__modal-today">
                    <p>Как можно скорее</p>
                    <p>с 16:00 до 19:00</p>
                </div>
                <div class="callback-modal-call-time__modal-divider">
                    <p>с 10:00 до 13:00</p>
                    <p>с 13:00 до 16:00</p>
                    <p>с 16:00 до 19:00</p>
                </div>
            </div>
            <input class="callback-modal__phone-number" readonly placeholder="Ваш номер телефона">
            <button class="callback-modal__confirm">
                Подтвердить номер
            </button>
            <p>Отправляя заявку, я соглашаюсь с условиями <a href="#">пользовательского соглашения</a></p>
        </div>
    </div>
    
    <script src="{% static 'js/car.js' %}"></script>
</body>
</html>